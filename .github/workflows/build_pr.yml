name: Build Pull Request

on:
  pull_request:
    branches: [main]
    types:
      - opened
      - reopened
      - synchronize
      - ready_for_review

permissions:
  contents: read

jobs:
  lint:
    uses: ./.github/workflows/_lint.yml
    with:
      python-version: "3.13"

  test:
    uses: ./.github/workflows/_test.yml
    with:
      coverage_package: "a2a_langchain_adapters"
      python-versions: '["3.10","3.11","3.12","3.13"]'
      coverage_python: "3.13"

  build:
    uses: ./.github/workflows/_build.yml
    with:
      python-version: "3.13"

  coverage:
    uses: ./.github/workflows/_coverage.yml
    needs: [lint, test, build]
    secrets:
      DEEPSOURCE_DSN: ${{ secrets.DEEPSOURCE_DSN }}
